pose-coach-frontend/
â”œâ”€ public/
â”‚  â””â”€ icons/                      # à¹„à¸­à¸„à¸­à¸™, manifest, favicon
â”œâ”€ src/
â”‚  â”œâ”€ app/
â”‚  â”‚  â”œâ”€ routes.tsx              # à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸«à¸™à¹‰à¸² (à¸–à¹‰à¸²à¸¡à¸µà¸«à¸¥à¸²à¸¢à¸«à¸™à¹‰à¸²)
â”‚  â”‚  â””â”€ store.ts                # global state (Zustand/Context): session, exercise, scores
â”‚  â”œâ”€ pages/
â”‚  â”‚  â”œâ”€ Home.tsx                # à¹€à¸¥à¸·à¸­à¸à¸—à¹ˆà¸², à¸›à¸¸à¹ˆà¸¡à¹€à¸£à¸´à¹ˆà¸¡
â”‚  â”‚  â”œâ”€ Coach.tsx               # à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸: à¸à¸¥à¹‰à¸­à¸‡ + à¸§à¸´à¸”à¸µà¹‚à¸­à¸ªà¸²à¸˜à¸´à¸• + à¸„à¸°à¹à¸™à¸™/feedback
â”‚  â”‚  â””â”€ Settings.tsx            # à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² FPS, à¸„à¸§à¸²à¸¡à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”, à¸à¸¥à¹‰à¸­à¸‡, à¸ à¸²à¸©à¸² (à¸­à¸­à¸›à¸Šà¸±à¸™)
â”‚  â”œâ”€ components/
â”‚  â”‚  â”œâ”€ CameraView.tsx          # à¹€à¸›à¸´à¸”à¸à¸¥à¹‰à¸­à¸‡ + à¹à¸ªà¸”à¸‡ feed
â”‚  â”‚  â”œâ”€ VideoDemo.tsx           # à¹€à¸¥à¹ˆà¸™à¸§à¸´à¸”à¸µà¹‚à¸­à¸ªà¸²à¸˜à¸´à¸• (à¸£à¸±à¸š videoURL)
â”‚  â”‚  â”œâ”€ SkeletonOverlay.tsx     # à¸§à¸²à¸”à¹‚à¸„à¸£à¸‡à¸à¸£à¸°à¸”à¸¹à¸à¸—à¸±à¸šà¸à¸¥à¹‰à¸­à¸‡/à¸§à¸´à¸”à¸µà¹‚à¸­ (Canvas)
â”‚  â”‚  â”œâ”€ ScorePanel.tsx          # à¸„à¸°à¹à¸™à¸™à¸£à¸§à¸¡, angle/shape, rep, phase
â”‚  â”‚  â”œâ”€ FeedbackPanel.tsx       # à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸™à¸°à¸™à¸³, bullet tips
â”‚  â”‚  â”œâ”€ ExercisePicker.tsx      # à¹€à¸¥à¸·à¸­à¸à¸—à¹ˆà¸²/à¸£à¸°à¸”à¸±à¸š
â”‚  â”‚  â””â”€ Toolbar.tsx             # à¸›à¸¸à¹ˆà¸¡ Start/Stop/Reset/Record à¸¯à¸¥à¸¯
â”‚  â”œâ”€ services/
â”‚  â”‚  â”œâ”€ api.ts                  # à¹€à¸£à¸µà¸¢à¸ backend: /reference /stats /reference_media
â”‚  â”‚  â””â”€ cache.ts                # cache reference/stats à¹ƒà¸™ IndexedDB/Memory
â”‚  â”œâ”€ ml/
â”‚  â”‚  â”œâ”€ detector.ts             # à¹‚à¸«à¸¥à¸”/à¸ªà¸£à¹‰à¸²à¸‡ MoveNet/MediaPipe (TF.js/WebGL)
â”‚  â”‚  â”œâ”€ preprocess.ts           # smooth/filter/normalize keypoints
â”‚  â”‚  â”œâ”€ features.ts             # computeAngles, boneVectors
â”‚  â”‚  â”œâ”€ segmentation.ts         # labelPhases, repCounter (FSM)
â”‚  â”‚  â”œâ”€ dtw.ts                  # DTW (Sakoeâ€“Chiba band)
â”‚  â”‚  â”œâ”€ scoring.ts              # angleScore(z-score Î¼,Ïƒ), shapeScore, aggregate
â”‚  â”‚  â”œâ”€ feedback.ts             # deviation â†’ coaching text (à¹„à¸—à¸¢/EN)
â”‚  â”‚  â””â”€ types.ts                # KP, Angles, Phases, Scores, Stats schema
â”‚  â”œâ”€ hooks/
â”‚  â”‚  â”œâ”€ useCamera.ts            # à¸ˆà¸±à¸”à¸à¸²à¸£ getUserMedia / switch camera / FPS
â”‚  â”‚  â”œâ”€ usePoseStream.ts        # loop: estimatePoses â†’ keypoints stream
â”‚  â”‚  â””â”€ useCoachLoop.ts         # main loop: preprocess â†’ features â†’ DTW â†’ score â†’ feedback
â”‚  â”œâ”€ utils/
â”‚  â”‚  â”œâ”€ draw.ts                 # à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸§à¸²à¸” skeleton/labels à¸¥à¸‡ canvas
â”‚  â”‚  â””â”€ time.ts                 # sync à¹€à¸§à¸¥à¸² video â†” reference (progress bar)
â”‚  â”œâ”€ styles/
â”‚  â”‚  â””â”€ index.css               # Tailwind / global styles
â”‚  â”œâ”€ env.d.ts                   # type à¸‚à¸­à¸‡ ENV (Vite)
â”‚  â”œâ”€ main.tsx
â”‚  â””â”€ App.tsx
â”œâ”€ .env                          # VITE_API_BASE=http://localhost:8000
â”œâ”€ index.html
â”œâ”€ package.json
â””â”€ vite.config.ts


à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¸«à¸¥à¸±à¸à¹à¸•à¹ˆà¸¥à¸°à¸ªà¹ˆà¸§à¸™ (à¸ªà¸±à¹‰à¸™ à¹†)

services/api.ts: à¸”à¸¶à¸‡ reference, stats, reference_media (à¹à¸„à¸Šà¸œà¸¥, à¸£à¸­à¸‡à¸£à¸±à¸š ETag/Cache-Control)

ml/: à¸£à¸§à¸¡ logic à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸šà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ (à¹„à¸¡à¹ˆà¹€à¸£à¸µà¸¢à¸ backend à¸¡à¸²à¸„à¸´à¸”)

detector.ts à¹‚à¸«à¸¥à¸”à¹‚à¸¡à¹€à¸”à¸¥ (MoveNet Lightning à¹à¸™à¸°à¸™à¸³)

preprocess.ts EMA/moving average + normalize (center/scale/rotate)

dtw.ts à¸ˆà¸±à¸”à¹€à¸§à¸¥à¸² userâ†”reference

scoring.ts z-score à¸•à¹ˆà¸­à¸¡à¸¸à¸¡Ã—à¹€à¸Ÿà¸ª (à¹ƒà¸Šà¹‰ Î¼,Ïƒ à¸ˆà¸²à¸ /stats) + aggregate 0â€“100

segmentation.ts FSM à¸™à¸±à¸š reps + label à¹€à¸Ÿà¸ª

feedback.ts à¹à¸¡à¸› deviation â†’ à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡

components/: à¹à¸¢à¸ UI à¸Šà¸±à¸”à¹€à¸ˆà¸™â€”à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™/à¸£à¸µà¸”à¸µà¹„à¸‹à¸™à¹Œà¸‡à¹ˆà¸²à¸¢

hooks/: à¹à¸¢à¸ loops/side-effects à¸­à¸­à¸à¸ˆà¸²à¸ UI à¹ƒà¸«à¹‰à¹€à¸—à¸ªà¸•à¹Œ/à¸”à¸¹à¹à¸¥à¸‡à¹ˆà¸²à¸¢

app/store.ts: à¹€à¸à¹‡à¸š state à¸£à¸§à¸¡ (exercise à¹€à¸¥à¸·à¸­à¸à¹„à¸§à¹‰, sessionId, scores, reps, phase, settings)

à¹‚à¸Ÿà¸¥à¸§à¹Œà¹ƒà¸™à¸«à¸™à¹‰à¸² Coach.tsx (à¸£à¸°à¸”à¸±à¸šà¸ªà¸¹à¸‡)

à¹€à¸¥à¸·à¸­à¸à¸—à¹ˆà¸² â†’ à¹‚à¸«à¸¥à¸” reference + stats + videoURL (services/api) â†’ à¹à¸„à¸Š

useCamera à¹€à¸›à¸´à¸”à¸à¸¥à¹‰à¸­à¸‡ â†’ usePoseStream à¹€à¸­à¸² keypoints à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡

useCoachLoop à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥: preprocess â†’ features â†’ DTW â†’ score â†’ feedback â†’ à¸­à¸±à¸›à¹€à¸”à¸• store

UI à¸­à¸±à¸›à¹€à¸”à¸•: CameraView + SkeletonOverlay, VideoDemo, ScorePanel, FeedbackPanel

ENV/Config à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸¡à¸µ

VITE_API_BASE = URL backend (serve read-only assets)

à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² HTTPS à¹ƒà¸™ dev (à¸ˆà¸³à¸¥à¸­à¸‡à¸œà¹ˆà¸²à¸™ Vite plugin/localhost) à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰ getUserMedia à¸—à¸³à¸‡à¸²à¸™à¸”à¸µà¸šà¸™à¸šà¸²à¸‡à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œ

Performance Tips

Resolution à¸à¸¥à¹‰à¸­à¸‡ 720p à¸à¸­ (fps à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸²à¹à¸¥à¸°à¹€à¸šà¸²à¸à¸§à¹ˆà¸² 1080p)

à¸ªà¹ˆà¸‡à¸œà¹ˆà¸²à¸™ WebGL backend à¸‚à¸­à¸‡ tfjs, à¹€à¸›à¸´à¸” Hardware Acceleration

Batch/Window 1â€“2 à¸§à¸´à¸™à¸²à¸—à¸µà¸ªà¸³à¸«à¸£à¸±à¸š DTW (à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸›à¸‚à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²à¹à¸šà¸š streaming)

à¹ƒà¸Šà¹‰ requestAnimationFrame à¸«à¸£à¸·à¸­ setInterval ~100â€“300ms à¸ªà¸³à¸«à¸£à¸±à¸š scoring UI

Milestones à¸—à¸µà¹ˆà¸—à¸³à¸—à¸µà¸¥à¸°à¸ªà¹€à¸•à¹‡à¸›

MVP: à¹€à¸›à¸´à¸”à¸à¸¥à¹‰à¸­à¸‡ + à¹à¸ªà¸”à¸‡ skeleton + à¹‚à¸«à¸¥à¸”/à¹€à¸¥à¹ˆà¸™à¸§à¸´à¸”à¸µà¹‚à¸­à¸ªà¸²à¸˜à¸´à¸•

à¹€à¸à¸´à¹ˆà¸¡ features â†’ DTW â†’ scores & reps (à¸„à¹ˆà¸²à¸à¸·à¹‰à¸™à¸à¸²à¸™)

à¹€à¸à¸´à¹ˆà¸¡ feedback + à¸›à¸¸à¹ˆà¸¡à¹€à¸¥à¸·à¸­à¸à¸—à¹ˆà¸²/à¸£à¸°à¸”à¸±à¸š + settings (FPS/à¸„à¸§à¸²à¸¡à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”)

à¸„à¸¸à¸¡ cache/versioning à¸‚à¸­à¸‡ /stats & /reference (à¸•à¸£à¸§à¸ˆ ETag/à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™)

Hardening: error states, permission à¸à¸¥à¹‰à¸­à¸‡, fallback skeleton à¸–à¹‰à¸²à¸§à¸´à¸”à¸µà¹‚à¸­à¸¥à¹ˆà¸¡

à¸–à¹‰à¸²à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ à¸œà¸¡à¸—à¸³ à¹„à¸Ÿà¸¥à¹Œà¸ªà¹€à¸à¸¥à¸•à¸±à¸™ (à¹€à¸›à¸¥à¹ˆà¸² à¹†) à¹ƒà¸«à¹‰à¸•à¸²à¸¡à¹‚à¸„à¸£à¸‡à¸™à¸µà¹‰à¹€à¸¥à¸¢à¸à¹‡à¹„à¸”à¹‰â€”à¸„à¸¸à¸“à¹€à¸­à¸²à¹„à¸›à¹€à¸•à¸´à¸¡à¹‚à¸„à¹‰à¸”à¸—à¸µà¸¥à¸°à¸ªà¹ˆà¸§à¸™à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ ğŸ¯



pose-coach-frontend/
â”œâ”€ .env # VITE_API_BASE=http://localhost:8000
â”œâ”€ index.html
â”œâ”€ package.json
â”œâ”€ tsconfig.json
â”œâ”€ vite.config.ts
â”œâ”€ public/
â”‚ â””â”€ icons/
â”‚ â”œâ”€ favicon.ico
â”‚ â””â”€ manifest.json
â””â”€ src/
â”œâ”€ app/
â”‚ â”œâ”€ routes.tsx
â”‚ â””â”€ store.ts
â”œâ”€ pages/
â”‚ â”œâ”€ Home.tsx
â”‚ â”œâ”€ Coach.tsx
â”‚ â””â”€ Settings.tsx
â”œâ”€ components/
â”‚ â”œâ”€ CameraView.tsx
â”‚ â”œâ”€ VideoDemo.tsx
â”‚ â”œâ”€ SkeletonOverlay.tsx
â”‚ â”œâ”€ ScorePanel.tsx
â”‚ â”œâ”€ FeedbackPanel.tsx
â”‚ â”œâ”€ ExercisePicker.tsx
â”‚ â””â”€ Toolbar.tsx
â”œâ”€ services/
â”‚ â”œâ”€ api.ts
â”‚ â””â”€ cache.ts
â”œâ”€ ml/
â”‚ â”œâ”€ detector.ts
â”‚ â”œâ”€ preprocess.ts
â”‚ â”œâ”€ features.ts
â”‚ â”œâ”€ segmentation.ts
â”‚ â”œâ”€ dtw.ts
â”‚ â”œâ”€ scoring.ts
â”‚ â”œâ”€ feedback.ts
â”‚ â””â”€ types.ts
â”œâ”€ hooks/
â”‚ â”œâ”€ useCamera.ts
â”‚ â”œâ”€ usePoseStream.ts
â”‚ â””â”€ useCoachLoop.ts
â”œâ”€ utils/
â”‚ â”œâ”€ draw.ts
â”‚ â””â”€ time.ts
â”œâ”€ styles/
â”‚ â””â”€ index.css
â”œâ”€ env.d.ts
â”œâ”€ main.tsx
â””â”€ App.tsx